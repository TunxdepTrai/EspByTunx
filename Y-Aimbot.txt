
-- Y-AIMBOT | FINAL | BY TUNX & Y-EXPLOIT TEAM

--// Y-AIMBOT GUI Khởi Tạo
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Y-Aimbot_GUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

-- Nút bật GUI
local OpenButton = Instance.new("TextButton")
OpenButton.Size = UDim2.new(0, 50, 0, 50)
OpenButton.Position = UDim2.new(0, 20, 0.05, 0)
OpenButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
OpenButton.Text = "☰"
OpenButton.TextSize = 24
OpenButton.TextColor3 = Color3.new(1,1,1)
OpenButton.Parent = ScreenGui
OpenButton.Draggable = true
OpenButton.Active = true
OpenButton.ZIndex = 10

-- Frame chính GUI
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 400)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.Visible = false
MainFrame.Parent = ScreenGui
MainFrame.ZIndex = 5

local Stroke = Instance.new("UIStroke", MainFrame)
Stroke.Color = Color3.fromRGB(0, 170, 255)
Stroke.Thickness = 2

-- Tiêu đề GUI
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "Y-Aimbot"
Title.TextColor3 = Color3.fromRGB(0, 170, 255)
Title.TextSize = 26
Title.Font = Enum.Font.GothamBold

local SubTitle = Instance.new("TextLabel", MainFrame)
SubTitle.Size = UDim2.new(1, 0, 0, 20)
SubTitle.Position = UDim2.new(0, 0, 0, 30)
SubTitle.BackgroundTransparency = 1
SubTitle.Text = "By: Tunx & Y-Exploit Team"
SubTitle.TextColor3 = Color3.fromRGB(200, 200, 200)
SubTitle.TextSize = 14
SubTitle.Font = Enum.Font.Gotham

-- Tabs Danh sách
local TabsFrame = Instance.new("Frame", MainFrame)
TabsFrame.Size = UDim2.new(1, 0, 0, 40)
TabsFrame.Position = UDim2.new(0, 0, 0, 60)
TabsFrame.BackgroundTransparency = 1

local Tabs = {"Aimbot", "Bot", "Visuals", "Check", "Settings"}
local TabButtons = {}

for i, tabName in ipairs(Tabs) do
    local TabBtn = Instance.new("TextButton")
    TabBtn.Size = UDim2.new(0, 100, 0, 40)
    TabBtn.Position = UDim2.new(0, (i-1)*100, 0, 0)
    TabBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    TabBtn.Text = tabName
    TabBtn.TextColor3 = Color3.new(1,1,1)
    TabBtn.TextSize = 18
    TabBtn.Font = Enum.Font.GothamBold
    TabBtn.Parent = TabsFrame

    TabButtons[tabName] = TabBtn
end

-- Khung Content chứa bên trong
local ContentFrame = Instance.new("Frame", MainFrame)
ContentFrame.Size = UDim2.new(1, 0, 1, -110)
ContentFrame.Position = UDim2.new(0, 0, 0, 100)
ContentFrame.BackgroundTransparency = 1

-- Bật/tắt GUI
OpenButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

-- Clear content mỗi lần chuyển Tab
local function clearContent()
    for _, child in ipairs(ContentFrame:GetChildren()) do
        child:Destroy()
    end
end

--// Chức năng bên trong Tabs

-- Tiêu đề khu nhỏ
local function createSection(title)
    local Section = Instance.new("TextLabel", ContentFrame)
    Section.Size = UDim2.new(1, 0, 0, 20)
    Section.BackgroundTransparency = 1
    Section.Text = "⮞ "..title
    Section.TextColor3 = Color3.fromRGB(0,170,255)
    Section.TextSize = 16
    Section.Font = Enum.Font.GothamBold
    return Section
end

-- Tạo Toggle
local function createToggle(name)
    local Toggle = Instance.new("TextButton", ContentFrame)
    Toggle.Size = UDim2.new(0, 400, 0, 30)
    Toggle.Position = UDim2.new(0, 20, 0, #ContentFrame:GetChildren() * 35)
    Toggle.BackgroundColor3 = Color3.fromRGB(40,40,40)
    Toggle.Text = "[ ] "..name
    Toggle.TextColor3 = Color3.new(1,1,1)
    Toggle.TextXAlignment = Enum.TextXAlignment.Left
    Toggle.Font = Enum.Font.Gotham

    local state = false
    Toggle.MouseButton1Click:Connect(function()
        state = not state
        Toggle.Text = (state and "[✓] " or "[ ] ")..name
    end)

    return Toggle, function() return state end
end

-- Tab Aimbot
local function loadAimbot()
    clearContent()
    createSection("Aimbot")
    createToggle("Bật Aimbot")
    createToggle("Chọn Mode Aim (Camera/Mouse)")
    createToggle("Chọn Method Silent Aim")

    createSection("Aim Offset")
    createToggle("Bật Offset")
    createToggle("Chọn Loại Offset (Static/Dynamic)")
    createToggle("Static Offset Increment")
    createToggle("Dynamic Offset Increment")
    createToggle("Max Auto Offset")

    createSection("Sensitivity & Noise")
    createToggle("Bật Sensitivity")
    createToggle("Chỉnh Sensitivity")
    createToggle("Bật Noise")
end

-- Tab Bot
local function loadBot()
    clearContent()
    createSection("SpinBot")
    createToggle("Bật SpinBot")
    createToggle("Chọn tốc độ xoay SpinBot")

    createSection("TriggerBot")
    createToggle("Bật TriggerBot")
    createToggle("Delay trước khi bắn (Trigger Delay)")
    createToggle("Giới hạn khoảng cách bắn (Trigger Distance)")
end

-- Y-AIMBOT | GUI FULL | PHẦN VISUALS (MỞ RỘNG)

local VisualsTab = Window:Tab("Visuals", "ESP Settings", "rbxassetid://7733964646")

-- Main Toggles
VisualsTab:Toggle("Bật ESP", false, function(state)
    ESPEnabled = state
end)

VisualsTab:Toggle("Box ESP", false, function(state)
    BoxESPEnabled = state
end)

VisualsTab:Toggle("Outline Box", false, function(state)
    BoxOutlineEnabled = state
end)

VisualsTab:Slider("Độ Dày Box", 1, 5, 2, function(value)
    BoxThickness = value
end)

VisualsTab:Toggle("Name ESP", false, function(state)
    NameESPEnabled = state
end)

VisualsTab:Toggle("HealthBar ESP", false, function(state)
    HealthESPEnabled = state
end)

VisualsTab:Toggle("Tool ESP", false, function(state)
    ToolESPEnabled = state
end)

VisualsTab:Toggle("Tracer ESP", false, function(state)
    TracerESPEnabled = state
end)

VisualsTab:Slider("Độ Dày Tracer", 1, 5, 2, function(value)
    TracerThickness = value
end)

VisualsTab:Toggle("Chams ESP (Xuyên tường)", false, function(state)
    ChamsESPEnabled = state
end)

VisualsTab:Toggle("Chams Visible/Invis Color", false, function(state)
    ChamsDifferentColor = state
end)

VisualsTab:Colorpicker("Màu Chams Thấy Được", Color3.fromRGB(0, 255, 0), function(color)
    ChamsVisibleColor = color
end)

VisualsTab:Colorpicker("Màu Chams Không Thấy", Color3.fromRGB(255, 0, 0), function(color)
    ChamsInvisibleColor = color
end)

VisualsTab:Toggle("Rainbow ESP", false, function(state)
    RainbowESPEnabled = state
end)

VisualsTab:Slider("Tốc độ Rainbow", 1, 10, 5, function(value)
    RainbowSpeed = value
end)

VisualsTab:Colorpicker("Màu ESP", Color3.fromRGB(255, 255, 255), function(color)
    ESPColor = color
end)

-- FoV Circle Settings
VisualsTab:Toggle("Hiện FoV Circle", false, function(state)
    FovCircleEnabled = state
end)

VisualsTab:Colorpicker("Màu FoV Circle", Color3.fromRGB(255, 255, 0), function(color)
    FovCircleColor = color
end)

VisualsTab:Slider("Kích Thước FoV", 10, 500, 150, function(value)
    Settings_FOVRadius = value
end)

VisualsTab:Slider("Độ Dày FoV Circle", 1, 5, 2, function(value)
    FovCircleThickness = value
end)

-- Team Color Mode
VisualsTab:Toggle("ESP Team Color", false, function(state)
    ESPTeamColorEnabled = state
end)

VisualsTab:Toggle("ESP Use Enemy Only", false, function(state)
    ESPEnemyOnly = state
end)

-- Y-AIMBOT | FINAL FULL SCRIPT | PHẦN 1: Aimbot Real

--// Khởi tạo Services
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

--// Biến config
local AimbotEnabled = false
local AimModeCamera = true -- true = Camera move, false = Mouse move
local UseSilentAim = false
local UseOffset = false
local StaticOffset = Vector3.new(0, 0, 0)
local DynamicOffsetIncrement = 0.1
local MaxDynamicOffset = 2
local SensitivityEnabled = false
local Sensitivity = 1
local NoiseEnabled = false
local NoiseStrength = 0.5
local AimbotFOV = 150
local AimbotPart = "Head" -- Có thể đổi thành "UpperTorso" hoặc "HumanoidRootPart"

local CurrentDynamicOffset = Vector3.new(0, 0, 0)

--// Hàm Tìm đối tượng gần nhất trong FoV
local function getClosestTarget()
    local closest = nil
    local shortestDistance = AimbotFOV

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild(AimbotPart) then
            local partPos, onScreen = Camera:WorldToViewportPoint(player.Character[AimbotPart].Position)

            if onScreen then
                local mousePos = Vector2.new(Mouse.X, Mouse.Y)
                local distance = (Vector2.new(partPos.X, partPos.Y) - mousePos).magnitude

                if distance < shortestDistance then
                    shortestDistance = distance
                    closest = player
                end
            end
        end
    end

    return closest
end

--// Hàm tạo Noise (rung nhẹ)
local function addNoise(vec)
    if NoiseEnabled then
        local randomVec = Vector3.new(
            math.random(-NoiseStrength*100, NoiseStrength*100)/100,
            math.random(-NoiseStrength*100, NoiseStrength*100)/100,
            math.random(-NoiseStrength*100, NoiseStrength*100)/100
        )
        return vec + randomVec
    else
        return vec
    end
end

--// Hàm Lock ngắm
local function aimAt(target)
    if not target then return end

    local aimPart = target.Character and target.Character:FindFirstChild(AimbotPart)
    if aimPart then
        local aimPos = aimPart.Position

        -- Thêm Offset
        if UseOffset then
            aimPos = aimPos + StaticOffset + CurrentDynamicOffset
        end

        -- Thêm Noise
        aimPos = addNoise(aimPos)

        -- Di chuyển ngắm
        if AimModeCamera then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, aimPos)
        else
            local screenPos = Camera:WorldToViewportPoint(aimPos)
            mousemoverel((screenPos.X - Mouse.X) * Sensitivity, (screenPos.Y - Mouse.Y) * Sensitivity)
        end
    end
end

--// Update Dynamic Offset
local function updateDynamicOffset()
    if CurrentDynamicOffset.Magnitude < MaxDynamicOffset then
        CurrentDynamicOffset = CurrentDynamicOffset + Vector3.new(
            DynamicOffsetIncrement,
            DynamicOffsetIncrement,
            DynamicOffsetIncrement
        )
    else
        CurrentDynamicOffset = Vector3.new(0,0,0)
    end
end

--// Main Loop - Aimbot chạy mỗi frame
RunService.RenderStepped:Connect(function()
    if AimbotEnabled then
        local target = getClosestTarget()
        if target then
            aimAt(target)
            if UseOffset then
                updateDynamicOffset()
            end
        end
    end
end)

--// Liên kết Toggle GUI (Bạn cần gắn Toggle GUI như sau:)
-- Khi bật nút "Bật Aimbot":
-- AimbotEnabled = true

-- Khi bật nút "Silent Aim":
-- UseSilentAim = true

-- Khi bật nút "Offset":
-- UseOffset = true

-- Khi bật nút "Sensitivity":
-- SensitivityEnabled = true

-- Khi bật nút "Noise":
-- NoiseEnabled = true

-- Y-AIMBOT | FINAL FULL SCRIPT | PHẦN 2: TriggerBot + SpinBot Real

--// Biến config cho TriggerBot
local TriggerBotEnabled = false
local TriggerDelay = 0.1 -- Thời gian trễ bắn (giây)
local TriggerMaxDistance = 500 -- Khoảng cách tối đa để Trigger hoạt động

--// Biến config cho SpinBot
local SpinBotEnabled = false
local SpinSpeed = 5 -- Tốc độ quay SpinBot

--// Hàm kiểm tra mục tiêu dưới chuột
local function getMouseTarget()
    local mouseTarget = Mouse.Target
    if mouseTarget then
        local targetPlayer = game.Players:GetPlayerFromCharacter(mouseTarget.Parent)
        if targetPlayer and targetPlayer ~= LocalPlayer then
            return targetPlayer
        end
    end
    return nil
end

--// Hàm TriggerBot
local function triggerShoot()
    if not TriggerBotEnabled then return end

    local target = getMouseTarget()
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        local dist = (LocalPlayer.Character.HumanoidRootPart.Position - target.Character.HumanoidRootPart.Position).Magnitude
        if dist <= TriggerMaxDistance then
            -- Giả lập bắn (ấn chuột trái)
            mouse1press()
            task.wait(TriggerDelay)
            mouse1release()
        end
    end
end

--// Hàm SpinBot
local function spinCharacter()
    if not SpinBotEnabled then return end

    local humanoidRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if humanoidRoot then
        humanoidRoot.CFrame = humanoidRoot.CFrame * CFrame.Angles(0, math.rad(SpinSpeed), 0)
    end
end

--// Main Loop - TriggerBot và SpinBot chạy mỗi frame
RunService.RenderStepped:Connect(function()
    -- TriggerBot
    triggerShoot()

    -- SpinBot
    spinCharacter()
end)

--// Liên kết Toggle GUI (Bạn cần gắn Toggle GUI như sau:)
-- Khi bật "Bật TriggerBot":
-- TriggerBotEnabled = true
-- Khi bật "Bật SpinBot":
-- SpinBotEnabled = true

-- Y-AIMBOT | FINAL FULL SCRIPT | PHẦN 3: Check System Alive/Friend/Team/Wall/Water/FoV

--// Các biến Toggle Checks
local AliveCheckEnabled = false
local FriendCheckEnabled = false
local TeamCheckEnabled = false
local WallCheckEnabled = false
local WaterCheckEnabled = false
local FovCheckEnabled = false

--// Các giá trị phụ trợ
local MaxTriggerMagnitude = 500 -- Default
local Settings_FOVRadius = 150 -- Default FOV Size

--// Hàm Check Alive
local function isAlive(player)
    if not AliveCheckEnabled then return true end
    local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    return humanoid and humanoid.Health > 0
end

--// Hàm Check Friend
local function isNotFriend(player)
    if not FriendCheckEnabled then return true end
    return not LocalPlayer:IsFriendsWith(player.UserId)
end

--// Hàm Check Team
local function isNotSameTeam(player)
    if not TeamCheckEnabled then return true end
    return LocalPlayer.Team ~= player.Team
end

--// Hàm Check Wall (không xuyên tường)
local function isNotBehindWall(player)
    if not WallCheckEnabled then return true end

    local character = player.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then return false end

    local origin = Camera.CFrame.Position
    local direction = (character.HumanoidRootPart.Position - origin).Unit * 1000

    local rayParams = RaycastParams.new()
    rayParams.FilterType = Enum.RaycastFilterType.Blacklist
    rayParams.FilterDescendantsInstances = {LocalPlayer.Character}

    local rayResult = workspace:Raycast(origin, direction, rayParams)

    if rayResult and rayResult.Instance then
        -- Nếu tia ray chạm trúng character địch => visible
        return rayResult.Instance:IsDescendantOf(character)
    end
    return false
end

--// Hàm Check Water
local function isNotInWater(player)
    if not WaterCheckEnabled then return true end
    local rootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return false end
    return not (workspace.Terrain:ReadVoxels(Region3.new(rootPart.Position, rootPart.Position), 4)[1][1][1] == Enum.Material.Water)
end

--// Hàm Check FOV
local function isInFOV(player)
    if not FovCheckEnabled then return true end

    local rootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return false end

    local screenPos, visible = Camera:WorldToViewportPoint(rootPart.Position)
    if not visible then return false end

    local screenCenter = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    local targetPos = Vector2.new(screenPos.X, screenPos.Y)

    local distance = (targetPos - screenCenter).Magnitude
    return distance <= Settings_FOVRadius
end

--// Hàm tổng kiểm tra toàn bộ
function IsValidTarget(player)
    return
        isAlive(player) and
        isNotFriend(player) and
        isNotSameTeam(player) and
        isNotBehindWall(player) and
        isNotInWater(player) and
        isInFOV(player)
end

--// Chú thích:
-- Bật toggle GUI sẽ gán AliveCheckEnabled, FriendCheckEnabled, TeamCheckEnabled, WallCheckEnabled, WaterCheckEnabled, FovCheckEnabled = true

-- Y-AIMBOT | FINAL FULL SCRIPT | PHẦN - CHECKS NÂNG CAO

--// Các biến Toggle nâng cao
local GodCheckEnabled = false
local TransparencyCheckEnabled = false
local WhitelistedGroupCheckEnabled = false
local BlacklistedGroupCheckEnabled = false
local IgnoredPlayersCheckEnabled = false
local VerifiedBadgeCheckEnabled = false
local MagnitudeCheckEnabled = false

--// Các giá trị phụ trợ
local IgnoredTransparency = 0.5
local MaxTriggerMagnitude = 500
local WhitelistedGroupId = 0
local BlacklistedGroupId = 0
local IgnoredPlayersList = {}

--// Hàm Check God Mode
local function isNotGod(player)
    if not GodCheckEnabled then return true end
    local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        return humanoid.MaxHealth > 100 -- Nếu MaxHealth quá cao thì nghi là God
    end
    return true
end

--// Hàm Check Transparency
local function isVisibleTransparency(player)
    if not TransparencyCheckEnabled then return true end
    for _, part in ipairs(player.Character:GetDescendants()) do
        if part:IsA("BasePart") and part.Transparency <= IgnoredTransparency then
            return true
        end
    end
    return false
end

--// Hàm Check Whitelisted Group
local function isNotInWhitelist(player)
    if not WhitelistedGroupCheckEnabled then return true end
    for _, group in ipairs(player:GetGroups()) do
        if group.Id == WhitelistedGroupId then
            return false
        end
    end
    return true
end

--// Hàm Check Blacklisted Group
local function isNotInBlacklist(player)
    if not BlacklistedGroupCheckEnabled then return true end
    for _, group in ipairs(player:GetGroups()) do
        if group.Id == BlacklistedGroupId then
            return false
        end
    end
    return true
end

--// Hàm Check Ignored Players
local function isNotIgnoredPlayer(player)
    if not IgnoredPlayersCheckEnabled then return true end
    return not table.find(IgnoredPlayersList, player.Name)
end

--// Hàm Check Verified Badge
local function hasVerifiedBadge(player)
    if not VerifiedBadgeCheckEnabled then return true end
    if player:FindFirstChild("HasVerifiedBadge") then
        return player.HasVerifiedBadge.Value == true
    end
    return false
end

--// Hàm Check Magnitude (Khoảng cách tối đa)
local function isInMagnitude(player)
    if not MagnitudeCheckEnabled then return true end
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return false end
    local distance = (player.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
    return distance <= MaxTriggerMagnitude
end

--// Hàm tổng IsValidTarget cập nhật thêm tất cả checks nâng cao
function IsValidTarget(player)
    return
        isAlive(player) and
        isNotGod(player) and
        isNotFriend(player) and
        isNotSameTeam(player) and
        isNotBehindWall(player) and
        isNotInWater(player) and
        isInFOV(player) and
        isVisibleTransparency(player) and
        isNotInWhitelist(player) and
        isNotInBlacklist(player) and
        isNotIgnoredPlayer(player) and
        hasVerifiedBadge(player) and
        isInMagnitude(player)
end

-- Y-AIMBOT | FINAL FULL SCRIPT | PHẦN HOẠT ĐỘNG VISUALS

--// Khởi tạo các biến ESP
local ESPEnabled = false
local BoxESPEnabled = false
local BoxOutlineEnabled = false
local NameESPEnabled = false
local HealthESPEnabled = false
local ToolESPEnabled = false
local TracerESPEnabled = false
local ChamsESPEnabled = false
local ChamsDifferentColor = false
local RainbowESPEnabled = false
local ESPTeamColorEnabled = false
local ESPEnemyOnly = false

local ESPColor = Color3.fromRGB(255, 255, 255)
local ChamsVisibleColor = Color3.fromRGB(0, 255, 0)
local ChamsInvisibleColor = Color3.fromRGB(255, 0, 0)
local RainbowSpeed = 5
local BoxThickness = 2
local TracerThickness = 2

local FovCircleEnabled = false
local FovCircleColor = Color3.fromRGB(255, 255, 0)
local Settings_FOVRadius = 150
local FovCircleThickness = 2

--// Hàm tạo Rainbow
local function getRainbowColor()
    local hue = tick() * RainbowSpeed % 1
    return Color3.fromHSV(hue, 1, 1)
end

--// Hàm vẽ FoV Circle
local fovCircle
RunService.RenderStepped:Connect(function()
    if FovCircleEnabled then
        if not fovCircle then
            fovCircle = Drawing.new("Circle")
            fovCircle.NumSides = 100
            fovCircle.Filled = false
        end
        fovCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
        fovCircle.Color = FovCircleColor
        fovCircle.Radius = Settings_FOVRadius
        fovCircle.Thickness = FovCircleThickness
        fovCircle.Visible = true
    else
        if fovCircle then
            fovCircle.Visible = false
        end
    end
end)

--// Hàm vẽ ESP từng Player
local function drawESP(player)
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    local hrp = player.Character.HumanoidRootPart
    local pos, visible = Camera:WorldToViewportPoint(hrp.Position)
    if not visible then return end

    local espColor = RainbowESPEnabled and getRainbowColor() or ESPColor

    -- Nếu có Team Check
    if ESPTeamColorEnabled and player.Team == LocalPlayer.Team then
        espColor = Color3.fromRGB(0, 255, 0)
    end

    -- Nếu Enemy Only mode
    if ESPEnemyOnly and player.Team == LocalPlayer.Team then
        return
    end

    -- Box ESP
    if BoxESPEnabled then
        local boxSize = Vector2.new(50, 80)
        local box = Drawing.new("Square")
        box.Size = boxSize
        box.Position = Vector2.new(pos.X - boxSize.X/2, pos.Y - boxSize.Y/2)
        box.Color = espColor
        box.Thickness = BoxThickness
        box.Filled = false
        box.Visible = true

        -- Outline
        if BoxOutlineEnabled then
            local outline = Drawing.new("Square")
            outline.Size = boxSize + Vector2.new(2,2)
            outline.Position = Vector2.new(pos.X - boxSize.X/2 - 1, pos.Y - boxSize.Y/2 - 1)
            outline.Color = Color3.fromRGB(0,0,0)
            outline.Thickness = BoxThickness + 1
            outline.Filled = false
            outline.Visible = true
            task.delay(0.03, function()
                outline:Remove()
            end)
        end

        task.delay(0.03, function()
            box:Remove()
        end)
    end

    -- Name ESP
    if NameESPEnabled then
        local nameTag = Drawing.new("Text")
        nameTag.Text = player.Name
        nameTag.Size = 16
        nameTag.Center = true
        nameTag.Outline = true
        nameTag.Color = espColor
        nameTag.Position = Vector2.new(pos.X, pos.Y - 50)
        nameTag.Visible = true

        task.delay(0.03, function()
            nameTag:Remove()
        end)
    end

    -- Health ESP
    if HealthESPEnabled then
        local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            local healthPercent = humanoid.Health / humanoid.MaxHealth
            local healthBar = Drawing.new("Square")
            healthBar.Size = Vector2.new(4, 80 * healthPercent)
            healthBar.Position = Vector2.new(pos.X - 30, pos.Y - 40 + (80 * (1-healthPercent)/2))
            healthBar.Color = Color3.fromRGB(0,255,0)
            healthBar.Filled = true
            healthBar.Visible = true

            task.delay(0.03, function()
                healthBar:Remove()
            end)
        end
    end

    -- Tracer ESP
    if TracerESPEnabled then
        local tracer = Drawing.new("Line")
        tracer.From = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y)
        tracer.To = Vector2.new(pos.X, pos.Y)
        tracer.Color = espColor
        tracer.Thickness = TracerThickness
        tracer.Visible = true

        task.delay(0.03, function()
            tracer:Remove()
        end)
    end

    -- Chams ESP (Xuyên tường)
    if ChamsESPEnabled then
        for _, part in ipairs(player.Character:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                part.Color = ChamsDifferentColor and (player.Team == LocalPlayer.Team and ChamsVisibleColor or ChamsInvisibleColor) or espColor
                part.Material = Enum.Material.Neon
                part.Transparency = 0.5
            end
        end
    end
end

--// Main Loop ESP
RunService.RenderStepped:Connect(function()
    if ESPEnabled then
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                drawESP(player)
            end
        end
    end
end)

-- Y-AIMBOT | FINAL FULL SCRIPT | PHẦN SETTINGS

--// Khởi tạo Config Table
local Config = {}

--// Theme Color Table
local Themes = {
    ["Dark"] = {
        BackgroundColor = Color3.fromRGB(25, 25, 25),
        AccentColor = Color3.fromRGB(255, 0, 0),
        TextColor = Color3.fromRGB(255, 255, 255)
    },
    ["Light"] = {
        BackgroundColor = Color3.fromRGB(245, 245, 245),
        AccentColor = Color3.fromRGB(0, 85, 255),
        TextColor = Color3.fromRGB(0, 0, 0)
    },
    ["Blood"] = {
        BackgroundColor = Color3.fromRGB(50, 0, 0),
        AccentColor = Color3.fromRGB(200, 0, 0),
        TextColor = Color3.fromRGB(255, 255, 255)
    },
    ["Aqua"] = {
        BackgroundColor = Color3.fromRGB(0, 170, 255),
        AccentColor = Color3.fromRGB(0, 255, 255),
        TextColor = Color3.fromRGB(255, 255, 255)
    },
    ["Discord"] = {
        BackgroundColor = Color3.fromRGB(54, 57, 63),
        AccentColor = Color3.fromRGB(88, 101, 242),
        TextColor = Color3.fromRGB(255, 255, 255)
    }
}

--// Hàm đổi Theme GUI
function ApplyTheme(themeName)
    local selectedTheme = Themes[themeName]
    if selectedTheme then
        -- Nếu GUI của bạn có API set Background / Accent / TextColor, thì gắn tại đây
        -- Ví dụ:
        -- GUI.BackgroundColor = selectedTheme.BackgroundColor
        -- GUI.AccentColor = selectedTheme.AccentColor
        -- GUI.TextColor = selectedTheme.TextColor
        -- (Tùy Framework GUI bạn dùng, ví dụ Rayfield, Kavo UI, etc)
        print("[Y-Aimbot] Đã đổi theme thành: "..themeName)
    else
        print("[Y-Aimbot] Không tìm thấy theme: "..themeName)
    end
end

--// Hàm Save Config
function SaveConfig()
    Config = {
        -- Aimbot
        AimbotEnabled = AimbotEnabled,
        AimPart = AimPart,
        AimSensitivity = AimSensitivity,
        AimNoise = AimNoise,

        -- TriggerBot / SpinBot
        TriggerBotEnabled = TriggerBotEnabled,
        TriggerDelay = TriggerDelay,
        TriggerMaxDistance = TriggerMaxDistance,
        SpinBotEnabled = SpinBotEnabled,
        SpinSpeed = SpinSpeed,

        -- ESP Visuals
        ESPEnabled = ESPEnabled,
        BoxESPEnabled = BoxESPEnabled,
        BoxOutlineEnabled = BoxOutlineEnabled,
        NameESPEnabled = NameESPEnabled,
        HealthESPEnabled = HealthESPEnabled,
        ToolESPEnabled = ToolESPEnabled,
        TracerESPEnabled = TracerESPEnabled,
        ChamsESPEnabled = ChamsESPEnabled,
        ChamsDifferentColor = ChamsDifferentColor,
        RainbowESPEnabled = RainbowESPEnabled,
        ESPColor = {ESPColor.R * 255, ESPColor.G * 255, ESPColor.B * 255},
        ChamsVisibleColor = {ChamsVisibleColor.R * 255, ChamsVisibleColor.G * 255, ChamsVisibleColor.B * 255},
        ChamsInvisibleColor = {ChamsInvisibleColor.R * 255, ChamsInvisibleColor.G * 255, ChamsInvisibleColor.B * 255},
        RainbowSpeed = RainbowSpeed,
        BoxThickness = BoxThickness,
        TracerThickness = TracerThickness,

        -- FoV
        FovCircleEnabled = FovCircleEnabled,
        FovCircleColor = {FovCircleColor.R * 255, FovCircleColor.G * 255, FovCircleColor.B * 255},
        Settings_FOVRadius = Settings_FOVRadius,
        FovCircleThickness = FovCircleThickness,

        -- Checks
        AliveCheckEnabled = AliveCheckEnabled,
        FriendCheckEnabled = FriendCheckEnabled,
        TeamCheckEnabled = TeamCheckEnabled,
        WallCheckEnabled = WallCheckEnabled,
        WaterCheckEnabled = WaterCheckEnabled,
        FovCheckEnabled = FovCheckEnabled,
        GodCheckEnabled = GodCheckEnabled,
        TransparencyCheckEnabled = TransparencyCheckEnabled,
        WhitelistedGroupCheckEnabled = WhitelistedGroupCheckEnabled,
        BlacklistedGroupCheckEnabled = BlacklistedGroupCheckEnabled,
        IgnoredPlayersCheckEnabled = IgnoredPlayersCheckEnabled,
        VerifiedBadgeCheckEnabled = VerifiedBadgeCheckEnabled,
        MaxTriggerMagnitude = MaxTriggerMagnitude,
        IgnoredTransparency = IgnoredTransparency,
        WhitelistedGroupId = WhitelistedGroupId,
        BlacklistedGroupId = BlacklistedGroupId,
        IgnoredPlayersList = IgnoredPlayersList
    }

    if writefile then
        writefile("Y_Aimbot_Config.json", game:GetService("HttpService"):JSONEncode(Config))
        print("[Y-Aimbot] Đã lưu cấu hình!")
    else
        print("[Y-Aimbot] writefile không hỗ trợ!")
    end
end

--// Hàm Load Config
function LoadConfig()
    if readfile and isfile and isfile("Y_Aimbot_Config.json") then
        local data = readfile("Y_Aimbot_Config.json")
        local decoded = game:GetService("HttpService"):JSONDecode(data)
        for key, value in pairs(decoded) do
            if type(Config[key]) == "table" then
                -- Nếu là màu Color3
                _G[key] = Color3.fromRGB(unpack(value))
            else
                _G[key] = value
            end
        end
        print("[Y-Aimbot] Đã tải cấu hình!")
    else
        print("[Y-Aimbot] Không tìm thấy file config!")
    end
end

--// Hàm Reset Config
function ResetConfig()
    -- Đặt tất cả về mặc định
    AimbotEnabled = false
    TriggerBotEnabled = false
    SpinBotEnabled = false
    ESPEnabled = false
    BoxESPEnabled = false
    NameESPEnabled = false
    HealthESPEnabled = false
    ToolESPEnabled = false
    TracerESPEnabled = false
    ChamsESPEnabled = false
    RainbowESPEnabled = false
    AliveCheckEnabled = false
    FriendCheckEnabled = false
    TeamCheckEnabled = false
    WallCheckEnabled = false
    WaterCheckEnabled = false
    FovCheckEnabled = false
    print("[Y-Aimbot] Đã reset cấu hình về mặc định!")
end

-- Y-AIMBOT | FINAL FULL SCRIPT | ĐÃ GẮN AIMBOT GHIM TÂM

--// [1] IMPORT THƯ VIỆN
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

--// [2] CẤU HÌNH AIMBOT
local AimbotEnabled = false
local AimPart = "Head" -- Hoặc "HumanoidRootPart"
local AimSensitivity = 0.2 -- Độ mượt (0.1 - 1)
local AimRadius = 150 -- Bán kính FoV Aim
local AimOffset = Vector3.new(0, 0, 0) -- Dịch lệch tâm

--// [3] HÀM TÌM ĐỊCH GẦN NHẤT TRONG FOV
local function getClosestTarget()
    local closestPlayer = nil
    local shortestDistance = math.huge

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild(AimPart) then
            local targetPos, onScreen = Camera:WorldToViewportPoint(player.Character[AimPart].Position)
            if onScreen then
                local screenCenter = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
                local distance = (Vector2.new(targetPos.X, targetPos.Y) - screenCenter).Magnitude
                if distance < AimRadius and distance < shortestDistance then
                    -- Kiểm tra Alive
                    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                    if humanoid and humanoid.Health > 0 then
                        closestPlayer = player
                        shortestDistance = distance
                    end
                end
            end
        end
    end

    return closestPlayer
end

--// [4] HÀM THỰC HIỆN GHIM TÂM AIM
local function aimAtTarget(player)
    if player and player.Character and player.Character:FindFirstChild(AimPart) then
        local part = player.Character[AimPart]
        local targetPosition = part.Position + AimOffset
        local currentCameraPos = Camera.CFrame.Position
        local newCFrame = CFrame.lookAt(currentCameraPos, targetPosition)

        -- Smooth Aim
        Camera.CFrame = Camera.CFrame:Lerp(newCFrame, AimSensitivity)
    end
end

--// [5] MAIN LOOP AIMBOT
RunService.RenderStepped:Connect(function()
    if AimbotEnabled then
        local target = getClosestTarget()
        if target then
            aimAtTarget(target)
        end
    end
end)

--// [6] BẬT/TẮT AIMBOT BẰNG PHÍM "E"
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == Enum.KeyCode.E then
        AimbotEnabled = not AimbotEnabled
        print("[Y-Aimbot] Aimbot:", AimbotEnabled and "ON" or "OFF")
    end
end)
